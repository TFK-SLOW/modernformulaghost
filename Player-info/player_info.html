<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-storage.js"></script>
  <link rel="icon" href="../favicon_io/favicon-16x16.png" type="image/x-icon">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Player Info - Modern Formula Ghost</title>
  <link rel="stylesheet" href="about-player.css" />
</head>
<body>
  <div class="background-layer"></div>
<div class="background"></div>
  <header class="navbar">
    <div class="logo">
      <a href="../index.html"><img src="../photos/mainlogo.svg" alt="Logo" /></a>
    </div>

    <!-- Search bar first -->
    <div class="search-container">
      <input type="text" id="searchInput" placeholder="Search IGN..." />
    </div>

    <!-- Navigation links -->
    <nav class="nav-links">
      <button id="uploadBtn" class="upload-btn">Upload Player</button>
      <a href="../index.html">Home</a>
      <a href="../MFG FORM/form.html">Form</a>
    </nav>
  </header>

  <div id="uploadModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Upload Player Info</h2>
      <form id="playerForm">
        <input type="text" id="ign" placeholder="IGN" required />
        <input type="text" id="drivetrain" placeholder="Drive Train (RWD/AWD)" required />
        <input type="text" id="rank" placeholder="Clan Rank" required />
        <input type="text" id="playerId" placeholder="Player ID" required />
        <input type="file" id="photo" accept="image/*" required />
        <button type="submit">Submit</button>
      </form>
    </div>
  </div>

  <main class="player-grid" id="playerContainer"></main>

  <footer>
    <p id="tiktok">Contact us:<br><a href="https://www.tiktok.com/@mfgteam?is_from_webapp=1&sender_device=pc" target="_blank">TIKTOK</a><br><a href="https://www.facebook.com/profile.php?id=61577144714826" target="_blank">FACEBOOK</a></p>
    <p>Â© 2025 Modern Formula Ghost Team. All rights reserved.</p>
    <p><span class="powered-by">THIS WEBSITE IS MADE BY SLOW AND THIS WEBSITE BE ONLY USED FOR MODERN FORMULA GHOST CLUB</span></p>
  </footer>

    <!-- Repeat 10 more player-card divs as needed -->
     
  </main>
  <script>
  // Your Firebase config
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT.firebaseapp.com",
    projectId: "YOUR_PROJECT",
    storageBucket: "YOUR_PROJECT.appspot.com",
    messagingSenderId: "SENDER_ID",
    appId: "APP_ID"
  };

  // Init Firebase
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
  const storage = firebase.storage();

  // Modal control
  const modal = document.getElementById("uploadModal");
  document.getElementById("uploadBtn").onclick = () => modal.style.display = "block";
  document.querySelector(".close").onclick = () => modal.style.display = "none";
  window.onclick = (e) => { if (e.target == modal) modal.style.display = "none"; };

  // Form submission
  document.getElementById("playerForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const ign = document.getElementById("ign").value;
    const drivetrain = document.getElementById("drivetrain").value;
    const rank = document.getElementById("rank").value;
    const playerId = document.getElementById("playerId").value;
    const photo = document.getElementById("photo").files[0];

    const storageRef = storage.ref('players/' + Date.now() + '_' + photo.name);
    await storageRef.put(photo);
    const photoURL = await storageRef.getDownloadURL();

    await db.collection("players").add({
      ign, drivetrain, rank, playerId, photoURL,
      timestamp: firebase.firestore.FieldValue.serverTimestamp()
    });

    alert("Player added!");
    modal.style.display = "none";
    document.getElementById("playerForm").reset();
    location.reload(); // refresh to display new player
  });
  const searchInput = document.getElementById("searchInput");
  const playerCards = document.querySelectorAll(".player-card");

  searchInput.addEventListener("input", function () {
    const query = this.value.toLowerCase();

    playerCards.forEach(card => {
      const cardText = card.textContent.toLowerCase();
      card.style.display = cardText.includes(query) ? "flex" : "none";
    });
  });
</script>
</body>
</html>
